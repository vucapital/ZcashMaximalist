<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kiểm tra ví ETH từ Mnemonic</title>

  <!-- Thư viện bip39 để kiểm tra mnemonic -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bip39/3.1.0/bip39.min.js"></script>
  <!-- Thư viện ethers phiên bản 6 -->
  <script src="https://cdn.ethers.io/lib/ethers-6.13.2.umd.min.js"></script>

  <style>
    body{font-family:Arial;background:#f0f2f5;padding:20px}
    .c{max-width:720px;margin:auto;background:white;padding:25px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.1)}
    textarea{width:100%;height:90px;padding:12px;font-size:16px;border:2px solid #ddd;border-radius:8px}
    button{width:100%;margin-top:12px;padding:14px;background:#1a73e8;color:white;border:none;border-radius:8px;font-size:17px;cursor:pointer}
    button:hover{background:#0d47a1}
    .r{margin-top:20px;padding:15px;background:#f9f9f9;border-radius:8px}
    .a{font:18px monospace;color:#d32f2f;word-break:break-all}
    .b{font-weight:bold;color:#2e7d32;font-size:20px}
  </style>
</head>
<body>
<div class="c">
  <h2 style="text-align:center">Kiểm tra ví ETH từ Mnemonic</h2>
  <textarea id="mnemonic" placeholder="Dán 12 hoặc 24 từ mnemonic vào đây..."></textarea>
  <button onclick="checkWallet()">Kiểm tra số dư ngay</button>
  <div id="output" class="r"></div>
</div>

<script>
async function checkWallet() {
  const phrase = document.getElementById("mnemonic").value.trim();
  const output = document.getElementById("output");
  output.innerHTML = "Đang xử lý...";

  if (!phrase) {
    output.innerHTML = "<p style='color:red'>⚠️ Vui lòng nhập mnemonic!</p>";
    return;
  }

  if (!bip39.validateMnemonic(phrase)) {
    output.innerHTML = "<p style='color:red'>❌ Mnemonic không hợp lệ!</p>";
    return;
  }

  try {
    const wallet = ethers.Wallet.fromPhrase(phrase);
    const address = wallet.address;

    output.innerHTML = `
      <p>Địa chỉ ví:</p>
      <p class="a">${address}</p>
      <p>Đang lấy số dư từ blockchain...</p>
    `;

    const provider = new ethers.JsonRpcProvider("https://eth.llamarpc.com");
    const balanceWei = await provider.getBalance(address);
    const eth = ethers.formatEther(balanceWei);

    output.innerHTML = `
      <p>Địa chỉ ví:</p>
      <p class="a">${address}</p>
      <p class="b">${parseFloat(eth).toFixed(6)} ETH</p>
      <p style="margin-top:15px;font-size:14px;color:#666">
        Dữ liệu real-time từ Ethereum Mainnet<br>
        <a href="https://etherscan.io/address/${address}" target="_blank">Xem trên Etherscan ↗</a>
      </p>
    `;

  } catch (e) {
    output.innerHTML = `<p style='color:red'>Lỗi: ${e.message}</p>`;
  }
}
</script>
</body>
</html>
